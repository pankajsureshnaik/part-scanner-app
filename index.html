<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spare Part Scanner & Logger</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Spare Part Scanner & Logger</h1>

    <div class="container input-methods">
        <!-- Method 1: Barcode/QR Code Scanner -->
        <div class="scanner-section">
            <h2><span class="number-circle">1</span> Scan Barcode / QR Code</h2>
            <div id="scanner-container">
                <div id="qr-reader"></div>
            </div>
            <button id="startScannerBtn">Start Scanner</button>
            <button id="stopScannerBtn" style="display:none;">Stop Scanner</button>
            <p class="small-text">Fastest and most accurate method for parts with a barcode.</p>
        </div>

        <!-- Method 2: OCR from Photo -->
        <div class="ocr-section">
            <h2><span class="number-circle">2</span> Upload Label Photo</h2>
            <div id="uploader-container">
                <input type="file" id="imageUploader" accept="image/*">
                <button id="processButton" disabled>Extract from Photo</button> <!-- Disabled until OCR engine is ready -->
                <p id="status">Initializing OCR Engine...</p>
                <p class="small-text">Use this for labels without a barcode to extract all details.</p>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>Logged Parts</h2>
        <div class="toolbar">
            <input type="text" id="searchInput" placeholder="Search logged parts...">
            <button id="exportCsvButton">Export to CSV</button>
            <button id="clearDataBtn">Clear All Logged Data</button> <!-- THE NEW CLEAR DATA BUTTON -->
        </div>
        <div class="table-wrapper">
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Part No.</th>
                        <th>Manufacturer</th>
                        <th>Serial Nr.</th>
                        <th>Specs</th>
                        <th>Category</th>
                        <th>Store Code</th>
                        <th>Notes</th>
                        <th>Raw Extracted Data</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be loaded and inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Script tags -->
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="script.js"></script>
</body>
</html>